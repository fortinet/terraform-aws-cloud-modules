## Example fgt_standalone

This example is used to quick deploy a single FortiGate instance on AWS with all required resources, like VPC, Route tables.

## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 1.3, < 2.0.0 |

## Providers

No providers.

## Modules

| Name | Source | Version |
|------|--------|---------|
| <a name="module_fgts"></a> [fgts](#module\_fgts) | ../../modules/fortigate/fgt | n/a |
| <a name="module_security-vpc"></a> [security-vpc](#module\_security-vpc) | ../../modules/aws/vpc | n/a |
| <a name="module_security_route_table"></a> [security\_route\_table](#module\_security\_route\_table) | ../../modules/aws/vpc_route_table | n/a |

## Resources

No resources.

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_access_key"></a> [access\_key](#input\_access\_key) | The Access Key of AWS account. | `string` | `""` | no |
| <a name="input_existing_igw"></a> [existing\_igw](#input\_existing\_igw) | Using existing IGW. <br/>If the id is specified, will use this IGW ID. Otherwise, will search the IGW based on the given infomation.<br/>Options:<br/>    - id         :  ID of the specific IGW.<br/>    - name       :  Name of the specific IGW to retrieve.<br/>    - tags       :  Map of tags, each pair of which must exactly match a pair on the desired IGW.<br/>    <br/>Example:<pre>existing_igw = {<br/>    name = "Security_IGW"<br/>    tags = {<br/>        \<Option\> = \<Option value\><br/>    }<br/>}</pre> | `any` | `null` | no |
| <a name="input_existing_security_groups"></a> [existing\_security\_groups](#input\_existing\_security\_groups) | Existing Security group names. | `list(string)` | `[]` | no |
| <a name="input_existing_security_vpc"></a> [existing\_security\_vpc](#input\_existing\_security\_vpc) | Using existing VPC. <br/>If the id is specified, will use this VPC ID. Otherwise, will search the VPC based on the given infomation.<br/>Options:<br/>    - cidr\_block :  Cidr block of the desired VPC.<br/>    - id         :  ID of the specific VPC.<br/>    - name       :  Name of the specific VPC to retrieve.<br/>    - tags       :  Map of tags, each pair of which must exactly match a pair on the desired VPC.<br/>    <br/>Example:<pre>existing_security_vpc = {<br/>    name = "Security_VPC"<br/>    tags = {<br/>        \<Option\> = \<Option value\><br/>    }<br/>}</pre> | `any` | `null` | no |
| <a name="input_existing_subnets"></a> [existing\_subnets](#input\_existing\_subnets) | Using existing subnets. <br/>Name format should be follow the name prefix of \"fgt\_login\_\", \"fgt\_internal\_\", \"tgw\_attachment\_\", \"gwlbe\_\", \"privatelink\_\".<br/>Options:<br/>    - id                      :  (Required\|string) Subnet ID.<br/>    - availability\_zone       :  (Required\|string) AZ for the subnet.<br/>    <br/>Example:<pre>existing_subnets = {<br/>  "fgt_login_us-east-2a" = {<br/>    id                = "subnet-123456789"<br/>    availability_zone = "us-east-2a"<br/>  }<br/>}</pre> | `any` | `null` | no |
| <a name="input_fgts"></a> [fgts](#input\_fgts) | FortiGate instance map.<br/>Format:<pre>fgts = {<br/>      \<FORTIGATE NAME\> = {<br/>          \<Option\> = \<Option value\><br/>      }<br/>  }</pre>Options:<br/>  FortiGate instance template<br/>  - ami\_id : (Optional\|string) The AMI ID of FortiOS image. If you leave this blank, Terraform will get the AMI ID from AWS market place with the given FortiOS version.<br/>  - fgt\_version : (Optional\|string) FortiGate version for the FortiGate instances. If the whole version been provided, please make sure the version is exist. If part of version been provided, such as 7.2, will using the latest release of this version.<br/>  - instance\_type : (Optional\|string) Instance type for the FortiGate instances. Default is c5.xlarge.<br/>  - license\_type : (Optional\|string) License type for the FortiGate instances. Options: on\_demand, byol. Default is on\_demand.<br/>  - fgt\_hostname : (Optional\|string) FortiGate instance hostname.<br/>  - fgt\_password : (Optional\|string) FortiGate instance login password. This is required for BYOL type of FortiGate instance since we need to upload the license to the instance by lambda function.<br/>  - fgt\_multi\_vdom : (Optional\|bool) Flag of FortiGate instance vdom type. `true` will be multi-vdom mode. `false` will be single-vdom mode. Default is `false`.<br/>  - lic\_file\_path : (Optional\|string) File path of FortiGate license file.<br/>  - fortiflex\_token : (Optional\|string) FortiFlex token that used to activate FortiGate instance.<br/>  - keypair\_name : (Required\|string) The keypair name for accessing the FortiGate instances.<br/>  - fgt\_admin\_https\_port : (Optional\|string) FortiGate instance HTTPS admin access port.<br/>  - fgt\_admin\_ssh\_port : (Optional\|string) FortiGate instance SSH admin access port.<br/>  - user\_conf\_content: (Optional\|string) User configuration in CLI format that will applied to the FortiGate instance.<br/>  - user\_conf\_file\_path : (Optional\|string) User configuration file path that will applied to FortiGate instance.<br/>  - cpu\_options : (Optional\|map) CPU options apply to the instance at launch time.<br/>    Options:<br/>    - amd\_sev\_snp : (Optional\|string) Indicates whether to enable the instance for AMD SEV-SNP. AMD SEV-SNP is supported with M6a, R6a, and C6a instance types only. Valid values are enabled and disabled.<br/>    - core\_count : (Optional\|int) Sets the number of CPU cores for an instance.<br/>    - threads\_per\_core : (Optional\|int) If set to 1, hyperthreading is disabled on the launched instance. Defaults to 2 if not set.<br/>  - network\_interfaces : (Optional\|map) Network interfaces configuration for FortiGate VM instance.<br/>    Options:<br/>    - device\_index       : (Required\|int) Integer to define the network interface index. Interface with `0` will be attached at boot time.<br/>    - vdom               : (Optional\|string) Vdom name that the interface belongs to. Only works when vdom mode is multi-vdom. Default will be root if not set and vdom mode is multi-vdom.<br/>    - description        : (Optional\|string) Description for the network interface.<br/>    - private\_ips        : (Optional\|list) List of private IPs to assign to the ENI without regard to order.<br/>    - source\_dest\_check  : (Optional\|bool) Whether to enable source destination checking for the ENI. Defaults false.<br/>    - enable\_public\_ip   : (Optional\|bool) Whether to assign a public IP for the ENI. Defaults to false.<br/>    - public\_ipv4\_pool   : (Optional\|string) Specify EC2 IPv4 address pool. If not set, Amazon's poll will be used. Only useful when `enable_public_ip` is set to true.<br/>    - existing\_eip\_id    : (Optional\|string) Associate an existing EIP to the ENI. Sould set enable\_public\_ip to false.<br/>    - subnet          : (Required\|map) Subnet infomation to create the interface.<br/>      Options:<br/>      - id : (Optional\|string) ID of the Subnet.<br/>      - name : (Optional\|string) Name of the Subnet that managed by this example.<br/>    - security\_groups    : (Optional\|list) List of map of security group to assign to the ENI. Defaults null.<br/>      Options:<br/>      - id : (Optional\|string) ID of the Gateway.<br/>      - name : (Optional\|string) Name of the Gateway that created by this example.<br/><br/>Example:<pre>fgts = {<br/>  fgt_byol = {<br/>    fgt_version = "7.2"<br/>    license_type = "byol"<br/>    fgt_password = "ftnt"<br/>    keypair_name = "keypair1"<br/>    network_interfaces = {<br/>      mgmt = {<br/>        device_index       = 0<br/>        subnet_id          = {<br/>          name = "fgt_mgmt"<br/>        }<br/>        enable_public_ip   = true<br/>        source_dest_check  = true<br/>        security_groups = [{<br/>          id = "\<SECURITY_GROUP_ID\>"<br/>        }]<br/>      },<br/>      port2 = {<br/>        device_index     = 1<br/>        subnet_id        = {<br/>          id = \<SUBNET_ID\><br/>        }<br/>        existing_eip_id  = \<ELISTIC_IP_ID\><br/>      }<br/>    }<br/>  }<br/>}</pre> | <pre>map(object({<br/>    ami_id = optional(string, "")<br/>    fgt_version = optional(string, "")<br/>    instance_type = optional(string, "c5n.xlarge")<br/>    license_type = optional(string, "on_demand")<br/>    fgt_hostname = optional(string, "")<br/>    fgt_password = optional(string, "")<br/>    fgt_multi_vdom = optional(string, false)<br/>    lic_file_path = optional(string, "")<br/>    fortiflex_token = optional(string, "")<br/>    keypair_name = string<br/>    fgt_admin_https_port = optional(string, "")<br/>    fgt_admin_ssh_port = optional(string, "")<br/>    user_conf_content = optional(string, "")<br/>    user_conf_file_path = optional(string, "")<br/>    network_interfaces = optional(map(object({<br/>      device_index = number<br/>      vdom = optional(string)<br/>      description = optional(string)<br/>      private_ips = optional(list(string))<br/>      source_dest_check = optional(bool)<br/>      enable_public_ip = optional(bool)<br/>      public_ipv4_pool = optional(string)<br/>      existing_eip_id = optional(string)<br/>      subnet = optional(object({<br/>        id = optional(string)<br/>        name = optional(string)<br/>      }))<br/>      security_groups = optional(list(object({<br/>        id = optional(string)<br/>        name = optional(string)<br/>      })))<br/>    })), {})<br/><br/>  }))</pre> | `{}` | no |
| <a name="input_general_tags"></a> [general\_tags](#input\_general\_tags) | The tags that will apply to all resouces. | `map(string)` | `{}` | no |
| <a name="input_igw_name"></a> [igw\_name](#input\_igw\_name) | Internet Gateway name for the security VPC. | `string` | `"security-vpc-igw"` | no |
| <a name="input_module_prefix"></a> [module\_prefix](#input\_module\_prefix) | Prefix that will be used in the whole module. | `string` | `""` | no |
| <a name="input_region"></a> [region](#input\_region) | The region to deploy the VPC. | `string` | n/a | yes |
| <a name="input_route_tables"></a> [route\_tables](#input\_route\_tables) | Dictionary of Route tables. <br/>Key is the route table name.<br/>Options:<br/>    - rt\_association\_subnets  :  (Optional\|list) List of map for subnets to associate to current route table.<br/>      Options:<br/>      - id : (Optional\|string) ID of the subnet.<br/>      - name : (Optional\|string) Name of the subnet that created by this example.<br/>    - rt\_association\_gateways :  (Optional\|list) List of map for gateways to associate to current route table.<br/>      Options:<br/>      - id : (Optional\|string) ID of the Gateway.<br/>      - name : (Optional\|string) Name of the Gateway that created by this example.<br/>    - routes                  :  (Optional\|map) Gateway IDs to associate to current route table.<br/>      Options:<br/>      One of the following destination arguments must be supplied:<br/>          - destination\_cidr\_block      : (Optional\|string) The destination CIDR block.<br/>          - destination\_ipv6\_cidr\_block : (Optional\|string) The destination IPv6 CIDR block.<br/>          - destination\_prefix\_list\_id  : (Optional\|string) The ID of a managed prefix list destination.<br/>      One of the following target arguments must be supplied:<br/>          - carrier\_gateway\_id          : (Optional\|string) Identifier of a carrier gateway. This attribute can only be used when the VPC contains a subnet which is associated with a Wavelength Zone.<br/>          - core\_network\_arn            : (Optional\|string) The Amazon Resource Name (ARN) of a core network.<br/>          - egress\_only\_gateway\_id      : (Optional\|string) Identifier of a VPC Egress Only Internet Gateway.<br/>          - gateway                  : (Optional\|string) Identifier of a VPC internet gateway or a virtual private gateway.<br/>            Options:<br/>            - id : (Optional\|string) ID of the Gateway.<br/>            - name : (Optional\|string) Name of the Gateway that created by this example.<br/>          - nat\_gateway              : (Optional\|string) Identifier of a VPC NAT gateway.<br/>            Options:<br/>            - id : (Optional\|string) ID of the NAT Gateway.<br/>          - local\_gateway\_id            : (Optional\|string) Identifier of a Outpost local gateway.<br/>          - network\_interface        : (Optional\|string) Identifier of an EC2 network interface.<br/>            Options:<br/>            - id : (Optional\|string) ID of the network interface.<br/>            - name : (Optional\|string) Format "<fgt\_name>.<interface\_name>", FortiGate name and network interface name are from variable `fgts`.<br/>          - transit\_gateway\_id          : (Optional\|string) Identifier of an EC2 Transit Gateway.<br/>          - vpc\_endpoint\_id             : (Optional\|string) Identifier of a VPC Endpoint.<br/>          - vpc\_peering\_connection\_id   : (Optional\|string) Identifier of a VPC peering connection.<br/>Example:<pre>route_tables = {<br/>  fgt_login = {<br/>    routes = {<br/>      to_igw = {<br/>        destination_cidr_block   = "0.0.0.0/0"<br/>        gateway = {<br/>          name = "security-vpc-igw"<br/>        }<br/>      }<br/>    }<br/>    rt_association_subnets = [<br/>      {<br/>        name = "fgt_mgmt"<br/>      }<br/>    ]<br/>  }<br/>}</pre> | <pre>map(<br/>    object({<br/>      rt_association_subnets = optional(list(object({<br/>        id = optional(string, null)<br/>        name = optional(string, null)<br/>      })), [])<br/>      rt_association_gateways = optional(list(object({<br/>        id = optional(string, null)<br/>        name = optional(string, null)<br/>      })), [])<br/>      routes = optional(map(object({<br/>        destination_cidr_block = optional(string, null)<br/>        destination_ipv6_cidr_block = optional(string, null)<br/>        destination_prefix_list_id = optional(string, null)<br/>        carrier_gateway_id = optional(string, null)<br/>        core_network_arn = optional(string, null)<br/>        egress_only_gateway_id = optional(string, null)<br/>        gateway = optional(object({<br/>          id = optional(string, null)<br/>          name = optional(string, null)<br/>        }), null)<br/>        nat_gateway = optional(object({<br/>          id = optional(string, null)<br/>        }), null)<br/>        local_gateway_id = optional(string, null)<br/>        network_interface = optional(object({<br/>          id = optional(string, null)<br/>          name = optional(string, null)<br/>        }), null)<br/>        transit_gateway_id = optional(string, null)<br/>        vpc_endpoint_id = optional(string, null)<br/>        vpc_peering_connection_id = optional(string, null)<br/>      })), null)<br/>    })<br/>  )</pre> | `{}` | no |
| <a name="input_secret_key"></a> [secret\_key](#input\_secret\_key) | The Secret Key of AWS account. | `string` | `""` | no |
| <a name="input_security_groups"></a> [security\_groups](#input\_security\_groups) | Security groups configuration for the target VPC.<br/>Format:<pre>security_groups = {<br/>        \<Security group name\> = {<br/>            description = "\<Description\>"<br/>            ingress     = {<br/>                \<Rule name1\> = {<br/>                    \<Option\> = \<Option value\><br/>                }<br/>            }<br/>            egress     = {<br/>                \<Rule name1\> = {<br/>                    \<Option\> = \<Option value\><br/>                }<br/>            }<br/>        }<br/>    }</pre>Security groups options:<br/>    - description  : (Optional\|string) Security group description. Cannot be empty string(""), and also can not be updated after created. This field maps to the AWS `GroupDescription` attribute, for which there is no Update API. If you'd like to classify your security groups in a way that can be updated, use `tags`.<br/>    - ingress      : (Optional\|map) Configuration block for ingress rules.<br/>    - egress       : (Optional\|map) Configuration block for egress rules.<br/><br/>Ingress options:<br/>    - from\_port         : (Required\|string) Start port (or ICMP type number if protocol is icmp or icmpv6).<br/>    - to\_port           : (Required\|string) End range port (or ICMP code if protocol is icmp).<br/>    - protocol          : (Required\|string) Protocol.<br/>    - cidr\_blocks       : (Optional\|list)  List of CIDR blocks.<br/>    - description       : (Optional\|string) Description of this ingress rule.<br/>    - ipv6\_cidr\_blocks  : (Optional\|list) List of IPv6 CIDR blocks.<br/>    - prefix\_list\_ids   : (Optional\|list) List of Prefix List IDs.<br/>    - security\_groups   : (Optional\|list) List of security groups. A group name can be used relative to the default VPC. Otherwise, group ID.<br/><br/>Egress options:<br/>    - from\_port         : (Required\|string) Start port (or ICMP type number if protocol is icmp).<br/>    - to\_port           : (Required\|string) End range port (or ICMP code if protocol is icmp).<br/>    - protocol          : (Required\|string) Protocol.<br/>    - cidr\_blocks       : (Optional\|list)  List of CIDR blocks.<br/>    - description       : (Optional\|string) Description of this egress rule.<br/>    - ipv6\_cidr\_blocks  : (Optional\|list) List of IPv6 CIDR blocks.<br/>    - prefix\_list\_ids   : (Optional\|list) List of Prefix List IDs.<br/>    - security\_groups   : (Optional\|list) List of security groups. A group name can be used relative to the default VPC. Otherwise, group ID.<br/><br/>Example:<pre>security_groups = {<br/>    secgrp1 = {<br/>        description = "Security group by Terraform"<br/>        ingress     = {<br/>            https = {<br/>                from_port         = "443"<br/>                to_port           = "443"<br/>                protocol          = "tcp"<br/>                cidr_blocks       = [ "0.0.0.0/0" ]<br/>            }<br/>        }<br/>        egress     = {<br/>            all_traffic = {<br/>                from_port         = "0"<br/>                to_port           = "0"<br/>                protocol          = "tcp"<br/>                cidr_blocks       = [ "0.0.0.0/0" ]<br/>            }<br/>        }<br/>    }<br/>}</pre> | `any` | `{}` | no |
| <a name="input_subnets"></a> [subnets](#input\_subnets) | Subnets configuration for the target VPC.<br/>The format of subnet name should be follow the name prefix of \"fgt\_login\_\", \"fgt\_internal\_\", \"tgw\_attachment\_\", \"gwlbe\_\", \"privatelink\_\". Specify the target subnet you needed.<br/>Format:<pre>subnets = {<br/>        \<Subnet name\> = {<br/>            \<Option\> = \<Option value\><br/>        }<br/>    }</pre>Subnet options:<br/>    - cidr\_block  : (Optional\|string) The IPv4 CIDR block for the subnet.<br/>    - availability\_zone  : (Optional\|string) AZ for the subnet.<br/>    - map\_public\_ip\_on\_launch  : (Optional\|string) Specify true to indicate that instances launched into the subnet should be assigned a public IP address. Default is false.<br/>Example:<pre>subnets = {<br/>    fgt_mgmt = {<br/>        cidr_block = "10.0.1.0/24"<br/>        availability_zone = "us-west-2a"<br/>    }<br/>}</pre> | `any` | `null` | no |
| <a name="input_vpc_cidr_block"></a> [vpc\_cidr\_block](#input\_vpc\_cidr\_block) | The IPv4 CIDR block for the VPC. | `string` | `""` | no |
| <a name="input_vpc_name"></a> [vpc\_name](#input\_vpc\_name) | VPC name for the security VPC. | `string` | `"security-vpc"` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_fgts_public_ip"></a> [fgts\_public\_ip](#output\_fgts\_public\_ip) | n/a |
| <a name="output_security_group"></a> [security\_group](#output\_security\_group) | n/a |
| <a name="output_subnets"></a> [subnets](#output\_subnets) | n/a |
